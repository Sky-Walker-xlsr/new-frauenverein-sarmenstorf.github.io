---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

// Anzahl Bilder manuell setzen:
const count = 4; // HIER anpassen
const bilder = Array.from({ length: count }, (_, i) => [
  `/images/ueber-uns/ueber-uns-${i + 1}.jpg`,
  `/images/ueber-uns/ueber-uns-${i + 1}.JPG`
]);
---

<Layout title="Über uns – Frauenverein Sarmenstorf" styleFile="/src/styles/ueber-uns.css">
  <Header />

  <main>
    <section class="section ueber-uns">
      <div class="container">
        <h1 class="page-title">Über uns</h1>
        <p>
          Der Frauenverein Sarmenstorf wurde im Jahre 1917 gegründet. Bereits haben wir das
          100-jährige Jubiläum mit einem speziellen Anlass gefeiert. Wir sind stolz darauf,
          200 Mitglieder zu zählen. Wir wollen mit unserem Angebot das Leben in der Gemeinde
          aktiv mitgestalten und setzen uns für ein lebendiges Miteinander im Dorf ein.
        </p>
        <p>
          Der Ursprung unseres Vereins liegt in der katholischen Kirche. Heute sind bei uns
          Frauen jeden Alters und unabhängig ihrer Konfession willkommen. Mit einem Jahresbeitrag
          von 20 Franken bist du dabei.
        </p>

        <!-- Slideshow -->
        <div class="slideshow-container">
          <div class="slideshow-track" id="slideshow-track">
            {bilder.map((srcs, i) => (
              <img src={srcs[0]} onError={`this.onerror=null;this.src='${srcs[1]}'`} alt={`Bild ${i + 1}`} loading="lazy" />
            ))}
          </div>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<script>
  const track = document.getElementById("slideshow-track");
  const slides = track.querySelectorAll("img");

  const firstClone = slides[0].cloneNode(true);
  track.appendChild(firstClone);

  let index = 0;
  const intervalTime = 5000;

  function moveSlide() {
    index++;
    track.style.transition = "transform 0.8s ease-in-out";
    track.style.transform = `translateX(-${index * 100}%)`;

    if (index === slides.length) {
      setTimeout(() => {
        track.style.transition = "none";
        track.style.transform = "translateX(0)";
        index = 0;
      }, 800);
    }
  }

  setInterval(moveSlide, intervalTime);
</script>
